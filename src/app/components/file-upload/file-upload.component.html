<div class="min-h-screen bg-gradient-to-b from-gray-50 to-gray-200 flex flex-col items-center py-12">
  <!-- Header -->
  <div class="w-full max-w-6xl mb-8 text-center">
    <h1 class="text-4xl font-extrabold text-blue-600 tracking-tight drop-shadow-sm">
      ğŸ“ File Manager
    </h1>
    <p class="text-gray-600 mt-2 text-lg">
      Upload, preview, and manage your files easily
    </p>
  </div>

  <!-- Main Container -->
  <div class="w-full max-w-6xl bg-white shadow-2xl rounded-2xl p-10 grid lg:grid-cols-2 gap-10">
    <!-- ğŸ”¹ Left: Upload Area -->
    <div
      class="flex flex-col items-center justify-center border-2 border-dashed border-blue-400 rounded-xl p-10 transition-all duration-300 hover:border-blue-600 hover:bg-blue-50"
      (drop)="onDrop($event)"
      (dragover)="onDragOver($event)"
      (dragleave)="onDragLeave($event)"
      [class.bg-blue-100]="isDragOver"
    >
      @if (!selectedFile) {
        <div class="text-center space-y-4">
          <div class="text-6xl">ğŸ“‚</div>
          <p class="text-gray-600 text-lg">
            Drag & drop your file here <br />or click below
          </p>
          <input id="fileInput" type="file" (change)="onFileSelected($event)" hidden />
          <label
            for="fileInput"
            class="inline-block mt-4 px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold shadow-md hover:bg-blue-700 transition"
          >
            Choose File
          </label>
        </div>
      } @else {
        <div class="text-center w-full">
          <img
            [src]="previewUrl"
            alt="Preview"
            class="max-h-72 w-full object-contain rounded-lg shadow-md border border-gray-200 bg-gray-100"
          />
          <p class="mt-4 text-gray-800 font-medium truncate">
            {{ selectedFile.name }}
            <span class="text-gray-500 text-sm">
              ({{ selectedFile.size | number }} bytes)
            </span>
          </p>

          @if (loading) {
            <div class="w-full bg-gray-200 rounded-full h-3 mt-4 overflow-hidden">
              <div
                class="bg-blue-600 h-3 transition-all duration-500 ease-out"
                [style.width.%]="uploadProgress"
              ></div>
            </div>
          }

          <div class="flex justify-center gap-4 mt-6">
            <button
              (click)="upload()"
              [disabled]="loading"
              class="px-6 py-2 rounded-lg font-semibold text-white transition-all"
              [ngClass]="{
                'bg-blue-600 hover:bg-blue-700 shadow-md': !loading,
                'bg-gray-400 cursor-not-allowed': loading
              }"
            >
              {{ loading ? 'Uploading...' : 'Upload' }}
            </button>
            <button
              (click)="clearSelection()"
              [disabled]="loading"
              class="px-6 py-2 rounded-lg font-semibold border border-gray-400 text-gray-700 hover:bg-gray-100 transition-all"
            >
              Clear
            </button>
          </div>
        </div>
      }
    </div>

    <!-- ğŸ”¹ Right: File List -->
    <div>
      <h2 class="text-2xl font-semibold text-gray-800 mb-6 border-b pb-2 border-gray-200">
        Uploaded Files
      </h2>

      @if (files && files.length > 0) {
        <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
          @for (f of files; track f.name) {
            <div
              class="bg-white rounded-xl shadow hover:shadow-lg transition transform hover:-translate-y-1 flex flex-col items-center p-4 border border-gray-100"
            >
              @if (f.image) {
                <div class="w-full h-40 overflow-hidden rounded-lg mb-3">
                  <img
                    [src]="'data:image/jpeg;base64,' + f.image"
                    [alt]="f.name"
                    class="w-full h-full object-cover"
                  />
                </div>
              } @else {
                <div
                  class="w-full h-40 flex items-center justify-center bg-gray-100 text-gray-400 rounded-lg text-4xl"
                >
                  ğŸ“„
                </div>
              }

              <p class="text-gray-800 font-medium text-sm truncate text-center w-full mt-1">
                {{ f.name }}
              </p>

              <div class="flex justify-center gap-3 mt-3">
                <button
                  (click)="download(f.name)"
                  class="px-3 py-1 text-sm bg-green-500 text-white rounded hover:bg-green-600 transition"
                >
                  â¬‡ Download
                </button>
                <button
                  (click)="deleteFile(f.id)"
                  class="px-3 py-1 text-sm bg-red-500 text-white rounded hover:bg-red-600 transition"
                >
                  ğŸ—‘ Delete
                </button>
              </div>
            </div>
          }
        </div>
      } @else {
        <div class="text-gray-400 italic text-center py-20">
          No files uploaded yet.
        </div>
      }
    </div>
  </div>
</div>
